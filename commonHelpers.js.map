{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst mainUrl = 'https://pixabay.com/api/';\n\nexport async function searchImg(query, page) {\n    const response = await axios(mainUrl, {\n        params: {\n            key: '43997530-fac9ffe50b9517751943b9e7a',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            page: page,\n            per_page: 15,\n        }\n    })\n    return response.data;\n}\n\n\n\n","\nexport function imgCreated(image) {\n    return `<li class=\"img-item\">\n    <a class=\"img-link\" href=\"${image.largeImageURL}\">\n    <img class=\"image\" src =\"${image.webformatURL}\" alt =\"${image.tags}\">\n    </a>\n    <div class=\"img-info\">\n    <p class=\"info\"><b>Likes</b>${image.likes}</p>\n    <p class=\"info\"><b>Views</b>${image.views}</p>\n    <p class=\"info\"><b>Comments</b>${image.comments}</p>\n    <p class=\"info\"><b>Downloads</b>${image.downloads}</p>\n    </div>\n    </li>`\n};\n\n export function imgTemplate(arr) {\n    return arr.map(imgCreated).join(\"\");\n};","import axios from 'axios';\nimport { searchImg } from './js/pixabay-api.js'\nimport { imgCreated } from \"./js/render-functions.js\";\nimport { imgTemplate } from \"./js/render-functions.js\";\n\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n//Extracting elements\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst btnLoadMore = document.querySelector(\".btn-load-more\");\n\n//Addeventlisteners\n\nform.addEventListener(\"submit\", handleSubmit);\nbtnLoadMore.addEventListener(\"click\", onLoadMore);\n\n//Variables\n\nlet page = 1;\nlet query = '';\nlet lightbox;\n\n//Initialization Simplelightbox in global visibility\n\n function initializeLightbox() {\n    lightbox = new SimpleLightbox('gallery, a', {\n        captionsData: 'alt',\n        captionDelay: 250\n    });\n   }\ninitializeLightbox();\n\nhideBtnLoadMore(); \n\n//Images search function\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    gallery.innerHTML = \"\";\n    hideBtnLoadMore();\n    showLoader();\n\n    page = 1;\n    query = event.target.elements.query.value.trim();\n\n    if (!query) {\n        hideLoader();\n        errNoMatchImg();\n        return;\n    }\n   \n    try {\n      \n        const data = await searchImg(query, page);\n       \n        if (data.hits.length === 0) {\n            errNoMatchImg();\n        }\n        else {\n            const markup = imgTemplate(data.hits);\n            gallery.innerHTML = markup;\n            lightbox.refresh();\n            showBtnLoadMore();\n        }\n    }\n   \n    catch {\n        errNoMatchImg();\n         }\n           \n    finally {\n        event.target.reset();\n        hideLoader();\n    }\n}\n\n//Images upload function\n \nasync function onLoadMore() {\n    page += 1;\n    showLoader();\n   const data = await searchImg(query, page);\n    try {\n        const markup = imgTemplate(data.hits);\n        gallery.insertAdjacentHTML(\"beforeend\", markup);\n        lightbox.refresh();\n        SmoothScroll();\n\n        const TotalPages = Math.ceil(data.totalHits / data.hits.length);\n\n        if (page >= TotalPages) {\n           hideBtnLoadMore();\n            noMoreImg();\n        }\n    }\n    catch (error) {\n        noMoreImg();\n    }\n    finally {\n        hideLoader();\n    }\n};\n\n// Helper functions\n\nfunction showLoader() {\n    loader.style.display = \"block\";\n}\n\nfunction hideLoader() {\n    loader.style.display = \"none\"\n}\n\nfunction showBtnLoadMore() {\n    btnLoadMore.classList.remove('hidden');\n}\n\nfunction hideBtnLoadMore() {\n    btnLoadMore.classList.add('hidden');\n}\n\n\nfunction errNoMatchImg() {\n    iziToast.error({\n                message: `Sorry, there are no images matching your search query.`,\n                messageColor: '#FAFAFB',\n                color: '#EF4040',\n                position: 'topRight'\n            });\n}\n\nfunction noMoreImg() {\niziToast.info({\n            message: `We're sorry, but you've reached the end of search results.`,\n            position: 'topRight'\n        });\n}\n\n\nfunction SmoothScroll() {\n     const card = document.querySelector(\".img-item\");\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight,\n            behavior: \"smooth\"\n        })\n}\n\n"],"names":["mainUrl","searchImg","query","page","axios","imgCreated","image","imgTemplate","arr","form","gallery","loader","btnLoadMore","handleSubmit","onLoadMore","lightbox","initializeLightbox","SimpleLightbox","hideBtnLoadMore","event","showLoader","hideLoader","errNoMatchImg","data","markup","showBtnLoadMore","SmoothScroll","TotalPages","noMoreImg","iziToast","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,2BAET,eAAeC,EAAUC,EAAOC,EAAM,CAYzC,OAXiB,MAAMC,EAAMJ,EAAS,CAClC,OAAQ,CACJ,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EACb,CACT,CAAK,GACe,IACpB,CChBO,SAASE,EAAWC,EAAO,CAC9B,MAAO;AAAA,gCACqBA,EAAM,aAAa;AAAA,+BACpBA,EAAM,YAAY,WAAWA,EAAM,IAAI;AAAA;AAAA;AAAA,kCAGpCA,EAAM,KAAK;AAAA,kCACXA,EAAM,KAAK;AAAA,qCACRA,EAAM,QAAQ;AAAA,sCACbA,EAAM,SAAS;AAAA;AAAA,UAGrD,CAEQ,SAASC,EAAYC,EAAK,CAC9B,OAAOA,EAAI,IAAIH,CAAU,EAAE,KAAK,EAAE,CACtC,CCFA,MAAMI,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAI3DH,EAAK,iBAAiB,SAAUI,CAAY,EAC5CD,EAAY,iBAAiB,QAASE,CAAU,EAIhD,IAAIX,EAAO,EACPD,EAAQ,GACRa,EAIH,SAASC,GAAqB,CAC3BD,EAAW,IAAIE,EAAe,aAAc,CACxC,aAAc,MACd,aAAc,GACtB,CAAK,CACD,CACJD,IAEAE,IAIA,eAAeL,EAAaM,EAAO,CAS/B,GARAA,EAAM,eAAc,EACpBT,EAAQ,UAAY,GACpBQ,IACAE,IAEAjB,EAAO,EACPD,EAAQiB,EAAM,OAAO,SAAS,MAAM,MAAM,OAEtC,CAACjB,EAAO,CACRmB,IACAC,IACA,MACH,CAED,GAAI,CAEA,MAAMC,EAAO,MAAMtB,EAAUC,EAAOC,CAAI,EAExC,GAAIoB,EAAK,KAAK,SAAW,EACrBD,QAEC,CACD,MAAME,EAASjB,EAAYgB,EAAK,IAAI,EACpCb,EAAQ,UAAYc,EACpBT,EAAS,QAAO,EAChBU,GACH,CACJ,MAEK,CACFH,GACE,QAEE,CACJH,EAAM,OAAO,QACbE,GACH,CACL,CAIA,eAAeP,GAAa,CACxBX,GAAQ,EACRiB,IACD,MAAMG,EAAO,MAAMtB,EAAUC,EAAOC,CAAI,EACvC,GAAI,CACA,MAAMqB,EAASjB,EAAYgB,EAAK,IAAI,EACpCb,EAAQ,mBAAmB,YAAac,CAAM,EAC9CT,EAAS,QAAO,EAChBW,IAEA,MAAMC,EAAa,KAAK,KAAKJ,EAAK,UAAYA,EAAK,KAAK,MAAM,EAE1DpB,GAAQwB,IACTT,IACCU,IAEP,MACa,CACVA,GACH,QACO,CACJP,GACH,CACL,CAIA,SAASD,GAAa,CAClBT,EAAO,MAAM,QAAU,OAC3B,CAEA,SAASU,GAAa,CAClBV,EAAO,MAAM,QAAU,MAC3B,CAEA,SAASc,GAAkB,CACvBb,EAAY,UAAU,OAAO,QAAQ,CACzC,CAEA,SAASM,GAAkB,CACvBN,EAAY,UAAU,IAAI,QAAQ,CACtC,CAGA,SAASU,GAAgB,CACrBO,EAAS,MAAM,CACH,QAAS,yDACT,aAAc,UACd,MAAO,UACP,SAAU,UAC1B,CAAa,CACb,CAEA,SAASD,GAAY,CACrBC,EAAS,KAAK,CACF,QAAS,6DACT,SAAU,UACtB,CAAS,CACT,CAGA,SAASH,GAAe,CAEhB,MAAMI,EADI,SAAS,cAAc,WAAW,EACpB,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACZ,KAAM,EACN,IAAKA,EACL,SAAU,QACtB,CAAS,CACT"}